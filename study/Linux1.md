# Linux

現在、アプリケーションを動かすOSとしてLinuxが使われることが多いです。
そのため、Linuxの基本的な操作方法を知っておく必要があります。


## ディストリビューション
Linuxディストリビューションとは簡単にいうとLinuxの種類です。
ディストリビューションによってコマンドや設定ファイルの場所が異なることがあります。

Linuxは様々なディストリビューションがありますが、その中でも代表的なものを以下に示します。

- Ubuntu
- Red Hat Enterprise Linux
- Debian
- Fedora
- Rocky Linux

## ディレクトリ表記

- `.`: カレントディレクトリ
- `..` : 親ディレクトリ
- `~` : ホームディレクトリ
- `/` : ルートディレクトリ

## ファイル操作
ログファイルの確認や設定ファイルの編集など、Linuxでのファイル操作は必須スキルです

- ls: 指定したディレクトリ内のファイルやディレクトリを一覧表示
  - ls -l: 詳細表示
  - ls -a: 隠しファイルも表示
  - ls -r: 逆順で表示
  - ls -t: 更新日時順で表示
- cp: ファイルやディレクトリをコピー
  - cp -r: ディレクトリを再帰的にコピー
  - cp -p: 元のファイルの属性を保持
  - cp -i: 処理前に確認
- mv: ファイルやディレクトリを移動したり、名前を変更
  - mv -i: 処理前に確認
  - mv -f: 強制的に移動
- rm: ファイルやディレクトリを削除
  - rm -r: ディレクトリを再帰的に削除
  - rm -f: 強制的に削除
  - rm -i: 削除前に確認
- pwd: 現在のディレクトリを表示
- cd: ディレクトリを移動
- mkdir: ディレクトリを作成
  - mkdir -p: 親ディレクトリも作成
- rmdir: ディレクトリを削除
  - rmdir -p: 親ディレクトリも削除
- touch: ファイルのタイムスタンプを更新、ファイルが存在しない場合は空のファイルを作成
- cat: ファイルの内容を表示
- more,less: ファイルの内容をページ単位で表示
  - j: 下にスクロール
  - k: 上にスクロール
  - space: 次のページ
  - b: 前のページ
  - f: 次のページ
  - q: 終了
- find: 指定したディレクトリ階層から条件に合致するファイルやディレクトリを検索するコマンド
  - find . -name "file.txt": カレントディレクトリ以下のファイルを検索
  - find / -type f -name "*.txt": ルートディレクトリ以下の拡張子が.txtのファイルを検索
- which: コマンドのパスを表示
- man: マニュアルを表示
- grep: ファイル内の文字列を検索
  - grep "keyword" file.txt: file.txt内のkeywordを検索
  - grep -r "keyword" /path/to/dir: ディレクトリ内のファイルを再帰的に検索
  - grep -i "keyword" file.txt: 大文字小文字を区別せずに検索
  - grep -v "keyword" file.txt: keywordを含まない行を検索
  - grep -e "keyword1" -e "keyword2" file.txt: keyword1またはkeyword2を検索
- head: ファイルの先頭部分を表示
  - head -n 5 file.txt: 先頭から5行表示
  - head -c 10 file.txt: 先頭から10バイト表示
- tail: ファイルの末尾部分を表示
  - tail -n 5 file.txt: 末尾から5行表示
  - tail -c 10 file.txt: 末尾から10バイト表示
  - tail -f file.txt: ファイルの末尾を表示し続ける
- sort: ファイルの内容をソート
  - sort -r file.txt: 逆順でソート
  - sort -n file.txt: 数値順でソート
  - sort -k 2 file.txt: 2列目でソート
  - sort -n -k 2 file.txt: 2列目の数値順でソート
- uniq: ファイルの内容を直前の行と重複する行を削除
- tr: ファイルの内容を置換
  - cat FILE | tr abc ABC: FILEの内容のaをA、bをB、cをCに置換
- diff: 2つのファイルの差分を表示
  - diff -c: 差分をコンテキスト形式で表示
  - diff -u: 差分を統一形式で表示
- vim: テキストエディタ
  - vim file.txt: file.txtを開く
  - :i: インサートモード
  - ESC: コマンドモード
  - :wq: 保存して終了
  - :q!: 保存せずに終了
  - :set number: 行番号を表示
  - :dd: 1行削除。削除した行はバッファに保存される
  - :10dd: 10行削除。削除した行はバッファに保存される
  - :yy: 1行コピー。コピーした行はバッファに保存される
  - :10yy: 10行コピー。コピーした行はバッファに保存される
  - :p: バッファに保存された行をペースト。カーソルの下にペーストされる
  - :P: バッファに保存された行をペースト。カーソルの上にペーストされる
  - :10: 10行目に移動
  - :u: 直前の操作を取り消す
  - :/keyword: keywordを検索
  - :1s/banana/apple/g: 1行目のbananaをappleに置換。行s/文字列/置換文字列/オプション。%sで全行


## 標準入出力
Linux のプログラムには、「1 つの入り口と 2 つの出口」があります。それを、それぞれ標準入力・標準出力・標準エラー出力といいます。

- 標準入力(stdin): プログラムに入ってくるデータ。通常はキーボードからの入力
- 標準出力(stdout): プログラムの実行結果を書き出す先。一般的にはプログラムを実行した端末のディスプレイ
- 標準エラー出力(stderr): エラーメッセージを書き出す先。一般的にはプログラムを実行した端末のディスプレイ

ファイルディスクリプタ番号: 入出力対象を識別するための番号
- 標準入力: 0
- 標準出力: 1
- 標準エラー出力: 2

**リダイレクト**
コンソールに標準出力された文字列はリダイレクトを使ってファイルに書き込むことができます。
リダイレクトは`>`を使って表します
- ls > ls-output: lsの結果をls-outputに書き込む。ls-outputファイルが存在しない場合は新規作成
- cat > cat-output: catの結果をcat-outputに書き込む(Ctrl+Dで入力終了)。cat-outputファイルが存在しない場合は新規作成
- ls -l tekitou 2> ls-error: ls -l tekitouのエラーメッセージをls-errorに書き込む。ls-errorファイルが存在しない場合は新規作成
- ls -l tekitou > ls-output 2>&1: ls -l tekitouの標準出力と標準エラー出力をls-outputに書き込む。ls-outputファイルが存在しない場合は新規作成

**パイプ**
パイプを使うと、コマンドの出力を次のコマンドの入力として渡すことができます。
- ls -l /usr/bin | less: /usr/binのファイル一覧をlessで表示
- ls -l xxx /usr/bin 2>&1 | less: /usr/binのファイル一覧をlessで表示。エラーメッセージも表示。xxxは存在しない想定
- ls /usr/bin/ | grep -e d$: /usr/binのファイル一覧からdで終わるファイルを検索


## 参考
- Linux標準教科書
  - https://linuc.org/textbooks/linux/
